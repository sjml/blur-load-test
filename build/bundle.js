var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function l(){return Object.create(null)}function o(e){e.forEach(n)}function s(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(t,n,l){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function a(e,t,n=t){return e.set(n),t}const u="undefined"!=typeof window;let c=u?()=>window.performance.now():()=>Date.now(),d=u?e=>requestAnimationFrame(e):e;const f=new Set;function h(e){f.forEach((t=>{t.c(e)||(f.delete(t),t.f())})),0!==f.size&&d(h)}function p(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function v(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function _(e){return document.createTextNode(e)}function $(){return _(" ")}function b(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function S(e,t){e.value=null==t?"":t}function C(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}function k(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function z(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}const M=new Set;let q,j=0;function E(e,t,n,l,o,s,i,r=0){const a=16.666/l;let u="{\n";for(let e=0;e<=1;e+=a){const l=t+(n-t)*s(e);u+=100*e+`%{${i(l,1-l)}}\n`}const c=u+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(c)}_${r}`,f=e.ownerDocument;M.add(f);const h=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(y("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[d]||(p[d]=!0,h.insertRule(`@keyframes ${d} ${c}`,h.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${l}ms linear ${o}ms 1 both`,j+=1,d}function L(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-l.length;o&&(e.style.animation=l.join(", "),j-=o,j||d((()=>{j||(M.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),M.clear())})))}function F(e){q=e}const T=[],I=[],O=[],P=[],Q=Promise.resolve();let D=!1;function A(e){O.push(e)}let B=!1;const H=new Set;function N(){if(!B){B=!0;do{for(let e=0;e<T.length;e+=1){const t=T[e];F(t),R(t.$$)}for(F(null),T.length=0;I.length;)I.pop()();for(let e=0;e<O.length;e+=1){const t=O[e];H.has(t)||(H.add(t),t())}O.length=0}while(T.length);for(;P.length;)P.pop()();D=!1,B=!1,H.clear()}}function R(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(A)}}let G;function J(e,t,n){e.dispatchEvent(function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(`${t?"intro":"outro"}${n}`))}const Z=new Set;let K;function U(){K={r:0,c:[],p:K}}function V(){K.r||o(K.c),K=K.p}function W(e,t){e&&e.i&&(Z.delete(e),e.i(t))}function Y(e,t,n,l){if(e&&e.o){if(Z.has(e))return;Z.add(e),K.c.push((()=>{Z.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}const X={duration:0};function ee(n,l,i,r){let a=l(n,i),u=r?0:1,p=null,m=null,g=null;function v(){g&&L(n,g)}function y(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function _(l){const{delay:s=0,duration:i=300,easing:r=t,tick:_=e,css:$}=a||X,b={start:c()+s,b:l};l||(b.group=K,K.r+=1),p||m?m=b:($&&(v(),g=E(n,u,l,i,s,r,$)),l&&_(0,1),p=y(b,i),A((()=>J(n,l,"start"))),function(e){let t;0===f.size&&d(h),new Promise((n=>{f.add(t={c:e,f:n})}))}((e=>{if(m&&e>m.start&&(p=y(m,i),m=null,J(n,p.b,"start"),$&&(v(),g=E(n,u,p.b,p.duration,0,r,a.css))),p)if(e>=p.end)_(u=p.b,1-u),J(n,p.b,"end"),m||(p.b?v():--p.group.r||o(p.group.c)),p=null;else if(e>=p.start){const t=e-p.start;u=p.a+p.d*r(t/p.duration),_(u,1-u)}return!(!p&&!m)})))}return{run(e){s(a)?(G||(G=Promise.resolve(),G.then((()=>{G=null}))),G).then((()=>{a=a(),_(e)})):_(e)},end(){v(),p=m=null}}}function te(e){e&&e.c()}function ne(e,t,l){const{fragment:i,on_mount:r,on_destroy:a,after_update:u}=e.$$;i&&i.m(t,l),A((()=>{const t=r.map(n).filter(s);a?a.push(...t):o(t),e.$$.on_mount=[]})),u.forEach(A)}function le(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function oe(e,t){-1===e.$$.dirty[0]&&(T.push(e),D||(D=!0,Q.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(t,n,s,i,r,a,u=[-1]){const c=q;F(t);const d=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:r,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:l(),dirty:u,skip_bound:!1};let f=!1;if(d.ctx=s?s(t,n.props||{},((e,n,...l)=>{const o=l.length?l[0]:n;return d.ctx&&r(d.ctx[e],d.ctx[e]=o)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](o),f&&oe(t,e)),n})):[],d.update(),f=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(g)}else d.fragment&&d.fragment.c();n.intro&&W(t.$$.fragment),ne(t,n.target,n.anchor),N()}F(c)}class ie{$destroy(){le(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const re=[];function ae(t,n=e){let l;const o=[];function s(e){if(i(t,e)&&(t=e,l)){const e=!re.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),re.push(n,t)}if(e){for(let e=0;e<re.length;e+=2)re[e][0](re[e+1]);re.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(i,r=e){const a=[i,r];return o.push(a),1===o.length&&(l=n(s)||e),i(t),()=>{const e=o.indexOf(a);-1!==e&&o.splice(e,1),0===o.length&&(l(),l=null)}}}}const ue=ae(null),ce=ae(null),de=ae(null),fe=ae(0),he=ae({tinyFormat:"jpg",tinySize:32,tinyQuality:40,normalSize:"320x240",placeholderMode:"rollover",placeholderCSS:"filter: blur(1.2em); transform: scale(1.3);",useEncodedData:!0});function pe(e,{delay:n=0,duration:l=400,easing:o=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:l,easing:o,css:e=>"opacity: "+e*s}}function me(e){let t,n,l,o,s,i,r,a;return{c(){t=y("img"),w(t,"class","placeholder svelte-poog8d"),t.src!==(n=e[4])&&w(t,"src",n),w(t,"alt",l=e[0].file),w(t,"width",o=e[1]+"px"),w(t,"height",s=e[2]+"px"),w(t,"style",i=e[3].placeholderCSS)},m(e,n){m(e,t,n),a=!0},p(e,r){(!a||16&r&&t.src!==(n=e[4]))&&w(t,"src",n),(!a||1&r&&l!==(l=e[0].file))&&w(t,"alt",l),(!a||2&r&&o!==(o=e[1]+"px"))&&w(t,"width",o),(!a||4&r&&s!==(s=e[2]+"px"))&&w(t,"height",s),(!a||8&r&&i!==(i=e[3].placeholderCSS))&&w(t,"style",i)},i(e){a||(A((()=>{r||(r=ee(t,pe,{duration:200},!0)),r.run(1)})),a=!0)},o(e){r||(r=ee(t,pe,{duration:200},!1)),r.run(0),a=!1},d(e){e&&g(t),e&&r&&r.end()}}}function ge(e){let t,n,l,s,i,r,a,u,c,d,f=e[5]&&me(e);return{c(){t=y("div"),n=y("img"),a=$(),f&&f.c(),w(n,"class","true"),n.src!==(l="./img/normal/"+e[3].normalSize+"/"+e[0].file+".jpg")&&w(n,"src",l),w(n,"alt",s=e[0].file),w(n,"width",i=e[1]+"px"),w(n,"height",r=e[2]+"px"),w(t,"class","photo svelte-poog8d"),C(t,"width",e[1]+"px"),C(t,"height",e[2]+"px")},m(l,o){m(l,t,o),p(t,n),p(t,a),f&&f.m(t,null),u=!0,c||(d=[b(window,"keydown",e[6]),b(window,"keyup",e[7]),b(t,"mouseenter",e[8]),b(t,"mouseleave",e[9])],c=!0)},p(e,[o]){(!u||9&o&&n.src!==(l="./img/normal/"+e[3].normalSize+"/"+e[0].file+".jpg"))&&w(n,"src",l),(!u||1&o&&s!==(s=e[0].file))&&w(n,"alt",s),(!u||2&o&&i!==(i=e[1]+"px"))&&w(n,"width",i),(!u||4&o&&r!==(r=e[2]+"px"))&&w(n,"height",r),e[5]?f?(f.p(e,o),32&o&&W(f,1)):(f=me(e),f.c(),W(f,1),f.m(t,null)):f&&(U(),Y(f,1,1,(()=>{f=null})),V()),(!u||2&o)&&C(t,"width",e[1]+"px"),(!u||4&o)&&C(t,"height",e[2]+"px")},i(e){u||(W(f),u=!0)},o(e){Y(f),u=!1},d(e){e&&g(t),f&&f.d(),c=!1,o(d)}}}function ve(e,t,n){let l,o;r(e,he,(e=>n(3,l=e))),r(e,de,(e=>n(12,o=e)));let{img:s}=t,i=300,a=300,u="",c=!0,d=!1,f=!1;return e.$$set=e=>{"img"in e&&n(0,s=e.img)},e.$$.update=()=>{if(15&e.$$.dirty){const e=l.normalSize.split("x").map(Number),t=e[0]/e[1];s.aspect>=1?(n(1,i=e[0]),n(2,a=i/t)):(n(2,a=e[1]),n(1,i=a/t)),n(4,u=function(){const e=`${s.file}.${l.tinyFormat}`;return l.useEncodedData?`data:image/jpeg;base64,${o[e]}`:`/img/tiny/format_${l.tinyFormat}/quality_${l.tinyQuality}/size_${l.tinySize}/`+e}())}if(3080&e.$$.dirty)switch(l.placeholderMode){case"always off":n(5,c=!1);break;case"always on":n(5,c=!0);break;case"hold shift":n(5,c=!d);break;case"rollover":n(5,c=!f)}},[s,i,a,l,u,c,function(e){"Shift"==e.key&&n(10,d=!0)},function(e){"Shift"==e.key&&n(10,d=!1)},function(e){n(11,f=!0)},function(e){n(11,f=!1)},d,f]}class ye extends ie{constructor(e){super(),se(this,e,ve,ge,i,{img:0})}}function _e(e,t,n){const l=e.slice();return l[1]=t[n],l}function $e(e){let t,n;return t=new ye({props:{img:e[1]}}),{c(){te(t.$$.fragment)},m(e,l){ne(t,e,l),n=!0},p(e,n){const l={};1&n&&(l.img=e[1]),t.$set(l)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){le(t,e)}}}function be(e){let t,n,l,o,s=e[0].inputImages,i=[];for(let t=0;t<s.length;t+=1)i[t]=$e(_e(e,s,t));const r=e=>Y(i[e],1,1,(()=>{i[e]=null}));return{c(){t=y("h2"),t.textContent="Images",n=$(),l=y("div");for(let e=0;e<i.length;e+=1)i[e].c();w(l,"class","photos svelte-vkd6b1")},m(e,s){m(e,t,s),m(e,n,s),m(e,l,s);for(let e=0;e<i.length;e+=1)i[e].m(l,null);o=!0},p(e,[t]){if(1&t){let n;for(s=e[0].inputImages,n=0;n<s.length;n+=1){const o=_e(e,s,n);i[n]?(i[n].p(o,t),W(i[n],1)):(i[n]=$e(o),i[n].c(),W(i[n],1),i[n].m(l,null))}for(U(),n=s.length;n<i.length;n+=1)r(n);V()}},i(e){if(!o){for(let e=0;e<s.length;e+=1)W(i[e]);o=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Y(i[e]);o=!1},d(e){e&&g(t),e&&g(n),e&&g(l),v(i,e)}}}function we(e,t,n){let l;return r(e,ue,(e=>n(0,l=e))),[l]}class xe extends ie{constructor(e){super(),se(this,e,we,be,i,{})}}function Se(t){let n,l,o,s,i,r,a,u,c,d,f,h,v,b,S,C,k,z,M,q,j,E,L,F=Ce(t[0])+"",T=Ce(t[1])+"",I=Ce(t[2])+"",O=Ce(t[3])+"";return{c(){n=y("div"),l=y("h3"),l.textContent="Metrics",o=_("\n    the preview images with selected options:\n    "),s=y("table"),i=y("tr"),r=y("td"),r.innerHTML="<strong>smallest</strong>",a=y("td"),u=_(F),c=$(),d=y("tr"),f=y("td"),f.innerHTML="<strong>largest</strong>",h=y("td"),v=_(T),b=$(),S=y("tr"),C=y("td"),C.innerHTML="<strong>average</strong>",k=y("td"),z=_(I),M=$(),q=y("tr"),j=y("td"),j.innerHTML="<strong>full set as base64</strong>",E=y("td"),L=_(O),w(r,"class","svelte-mn3pro"),w(a,"class","svelte-mn3pro"),w(i,"class","svelte-mn3pro"),w(f,"class","svelte-mn3pro"),w(h,"class","svelte-mn3pro"),w(d,"class","svelte-mn3pro"),w(C,"class","svelte-mn3pro"),w(k,"class","svelte-mn3pro"),w(S,"class","svelte-mn3pro"),w(j,"class","svelte-mn3pro"),w(E,"class","svelte-mn3pro"),w(q,"class","svelte-mn3pro"),w(s,"class","svelte-mn3pro"),w(n,"class","metrics svelte-mn3pro")},m(e,t){m(e,n,t),p(n,l),p(n,o),p(n,s),p(s,i),p(i,r),p(i,a),p(a,u),p(s,c),p(s,d),p(d,f),p(d,h),p(h,v),p(s,b),p(s,S),p(S,C),p(S,k),p(k,z),p(s,M),p(s,q),p(q,j),p(q,E),p(E,L)},p(e,[t]){1&t&&F!==(F=Ce(e[0])+"")&&x(u,F),2&t&&T!==(T=Ce(e[1])+"")&&x(v,T),4&t&&I!==(I=Ce(e[2])+"")&&x(z,I),8&t&&O!==(O=Ce(e[3])+"")&&x(L,O)},i:e,o:e,d(e){e&&g(n)}}}function Ce(e){return e<1024?`${e} bytes`:`${(e/1024).toFixed(3)} KB`}function ke(e,t,n){let l,o,s,i,a,u;return r(e,ce,(e=>n(4,l=e))),r(e,he,(e=>n(5,o=e))),r(e,fe,(e=>n(3,s=e))),e.$$.update=()=>{if(48&e.$$.dirty){const e=l[`format_${o.tinyFormat}`][`quality_${o.tinyQuality}`][`size_${o.tinySize}`];n(0,i=Math.min(...e)),n(1,a=Math.max(...e)),n(2,u=Math.ceil(e.reduce(((e,t)=>e+t))/e.length))}},[i,a,u,s,l,o]}class ze extends ie{constructor(e){super(),se(this,e,ke,Se,i,{})}}function Me(e,t,n){const l=e.slice();return l[14]=t[n],l}function qe(e,t,n){const l=e.slice();return l[17]=t[n],l}function je(e,t,n){const l=e.slice();return l[20]=t[n],l}function Ee(e,t,n){const l=e.slice();return l[17]=t[n],l}function Le(e){let t,n,l,o=e[17]+"";return{c(){t=y("option"),n=_(o),t.__value=l=e[17],t.value=t.__value},m(e,l){m(e,t,l),p(t,n)},p(e,s){2&s&&o!==(o=e[17]+"")&&x(n,o),2&s&&l!==(l=e[17])&&(t.__value=l,t.value=t.__value)},d(e){e&&g(t)}}}function Fe(e){let t,n,l,o=e[20]+"";return{c(){t=y("option"),n=_(o),t.__value=l=e[20],t.value=t.__value},m(e,l){m(e,t,l),p(t,n)},p(e,s){2&s&&o!==(o=e[20]+"")&&x(n,o),2&s&&l!==(l=e[20])&&(t.__value=l,t.value=t.__value)},d(e){e&&g(t)}}}function Te(e){let t,n,l,o=e[17]+"";return{c(){t=y("option"),n=_(o),t.__value=l=e[17],t.value=t.__value},m(e,l){m(e,t,l),p(t,n)},p(e,s){2&s&&o!==(o=e[17]+"")&&x(n,o),2&s&&l!==(l=e[17])&&(t.__value=l,t.value=t.__value)},d(e){e&&g(t)}}}function Ie(e){let t,n,l,o=e[14]+"";return{c(){t=y("option"),n=_(o),t.__value=l=e[14],t.value=t.__value},m(e,l){m(e,t,l),p(t,n)},p(e,s){2&s&&o!==(o=e[14]+"")&&x(n,o),2&s&&l!==(l=e[14])&&(t.__value=l,t.value=t.__value)},d(e){e&&g(t)}}}function Oe(e){let t,n;return t=new ze({}),{c(){te(t.$$.fragment)},m(e,l){ne(t,e,l),n=!0},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){le(t,e)}}}function Pe(e){let t,n,l,s,i,r,a,u,c,d,f,h,x,C,z,M,q,j,E,L,F,T,I,O,P,Q,D,B,H,N,R,G,J,Z,K,X,ee,te,ne,le,oe,se,ie,re,ae,ue,ce,de,fe,he,pe,me,ge,ve,ye,_e,$e,be=e[1].normalSizes.reverse(),we=[];for(let t=0;t<be.length;t+=1)we[t]=Le(Ee(e,be,t));let xe=e[1].qualities,Se=[];for(let t=0;t<xe.length;t+=1)Se[t]=Fe(je(e,xe,t));let Ce=e[1].tinySizes,ke=[];for(let t=0;t<Ce.length;t+=1)ke[t]=Te(qe(e,Ce,t));let ze=e[1].formats,Pe=[];for(let t=0;t<ze.length;t+=1)Pe[t]=Ie(Me(e,ze,t));let Qe=e[2]&&Oe();return{c(){t=y("div"),n=y("div"),l=y("h2"),l.textContent="Controls",s=$(),i=y("div"),r=y("label"),a=_("Use Base64 encoded data for previews\n                "),u=y("input"),c=$(),d=y("hr"),f=$(),h=y("div"),x=y("label"),C=_("Normal Image Size:\n                "),z=y("select");for(let e=0;e<we.length;e+=1)we[e].c();M=$(),q=y("label"),j=_("Tiny Image Quality:\n                "),E=y("select");for(let e=0;e<Se.length;e+=1)Se[e].c();L=$(),F=y("label"),T=_("Tiny Image Resolution:\n                "),I=y("select");for(let e=0;e<ke.length;e+=1)ke[e].c();O=$(),P=y("label"),Q=_("Tiny Image Format:\n                "),D=y("select");for(let e=0;e<Pe.length;e+=1)Pe[e].c();B=$(),H=y("div"),N=y("div"),R=_("Placeholder Mode:\n                "),G=y("label"),J=y("input"),Z=_("\n                    rollover"),K=$(),X=y("label"),ee=y("input"),te=_("\n                    always on"),ne=$(),le=y("label"),oe=y("input"),se=_("\n                    always off"),ie=$(),re=y("label"),ae=y("input"),ue=_("\n                    hold shift"),ce=$(),de=y("hr"),fe=$(),he=y("div"),pe=y("label"),me=_("Placeholder CSS:\n                "),ge=y("input"),ve=$(),Qe&&Qe.c(),w(u,"type","checkbox"),w(i,"class","svelte-1q6s1u6"),w(d,"class","svelte-1q6s1u6"),w(z,"id","normalSize"),void 0===e[0].normalSize&&A((()=>e[4].call(z))),w(x,"class","svelte-1q6s1u6"),w(E,"id","tinyQuality"),void 0===e[0].tinyQuality&&A((()=>e[5].call(E))),w(q,"class","svelte-1q6s1u6"),w(I,"id","tinySize"),void 0===e[0].tinySize&&A((()=>e[6].call(I))),w(F,"class","svelte-1q6s1u6"),w(D,"id","tinyFormat"),void 0===e[0].tinyFormat&&A((()=>e[7].call(D))),w(P,"class","svelte-1q6s1u6"),w(h,"class","params svelte-1q6s1u6"),w(J,"type","radio"),J.__value="rollover",J.value=J.__value,e[9][0].push(J),w(ee,"type","radio"),ee.__value="always on",ee.value=ee.__value,e[9][0].push(ee),w(oe,"type","radio"),oe.__value="always off",oe.value=oe.__value,e[9][0].push(oe),w(ae,"type","radio"),ae.__value="hold shift",ae.value=ae.__value,e[9][0].push(ae),w(N,"class","svelte-1q6s1u6"),w(H,"class","svelte-1q6s1u6"),w(de,"class","svelte-1q6s1u6"),w(ge,"type","text"),w(ge,"class","svelte-1q6s1u6"),w(he,"class","svelte-1q6s1u6"),w(n,"class","svelte-1q6s1u6"),w(t,"class","panel svelte-1q6s1u6")},m(o,g){m(o,t,g),p(t,n),p(n,l),p(n,s),p(n,i),p(i,r),p(r,a),p(r,u),u.checked=e[0].useEncodedData,p(n,c),p(n,d),p(n,f),p(n,h),p(h,x),p(x,C),p(x,z);for(let e=0;e<we.length;e+=1)we[e].m(z,null);k(z,e[0].normalSize),p(h,M),p(h,q),p(q,j),p(q,E);for(let e=0;e<Se.length;e+=1)Se[e].m(E,null);k(E,e[0].tinyQuality),p(h,L),p(h,F),p(F,T),p(F,I);for(let e=0;e<ke.length;e+=1)ke[e].m(I,null);k(I,e[0].tinySize),p(h,O),p(h,P),p(P,Q),p(P,D);for(let e=0;e<Pe.length;e+=1)Pe[e].m(D,null);k(D,e[0].tinyFormat),p(n,B),p(n,H),p(H,N),p(N,R),p(N,G),p(G,J),J.checked=J.__value===e[0].placeholderMode,p(G,Z),p(N,K),p(N,X),p(X,ee),ee.checked=ee.__value===e[0].placeholderMode,p(X,te),p(N,ne),p(N,le),p(le,oe),oe.checked=oe.__value===e[0].placeholderMode,p(le,se),p(N,ie),p(N,re),p(re,ae),ae.checked=ae.__value===e[0].placeholderMode,p(re,ue),p(n,ce),p(n,de),p(n,fe),p(n,he),p(he,pe),p(pe,me),p(pe,ge),S(ge,e[0].placeholderCSS),p(t,ve),Qe&&Qe.m(t,null),ye=!0,_e||($e=[b(u,"change",e[3]),b(z,"change",e[4]),b(E,"change",e[5]),b(I,"change",e[6]),b(D,"change",e[7]),b(J,"change",e[8]),b(ee,"change",e[10]),b(oe,"change",e[11]),b(ae,"change",e[12]),b(ge,"input",e[13])],_e=!0)},p(e,[n]){if(3&n&&(u.checked=e[0].useEncodedData),2&n){let t;for(be=e[1].normalSizes.reverse(),t=0;t<be.length;t+=1){const l=Ee(e,be,t);we[t]?we[t].p(l,n):(we[t]=Le(l),we[t].c(),we[t].m(z,null))}for(;t<we.length;t+=1)we[t].d(1);we.length=be.length}if(3&n&&k(z,e[0].normalSize),2&n){let t;for(xe=e[1].qualities,t=0;t<xe.length;t+=1){const l=je(e,xe,t);Se[t]?Se[t].p(l,n):(Se[t]=Fe(l),Se[t].c(),Se[t].m(E,null))}for(;t<Se.length;t+=1)Se[t].d(1);Se.length=xe.length}if(3&n&&k(E,e[0].tinyQuality),2&n){let t;for(Ce=e[1].tinySizes,t=0;t<Ce.length;t+=1){const l=qe(e,Ce,t);ke[t]?ke[t].p(l,n):(ke[t]=Te(l),ke[t].c(),ke[t].m(I,null))}for(;t<ke.length;t+=1)ke[t].d(1);ke.length=Ce.length}if(3&n&&k(I,e[0].tinySize),2&n){let t;for(ze=e[1].formats,t=0;t<ze.length;t+=1){const l=Me(e,ze,t);Pe[t]?Pe[t].p(l,n):(Pe[t]=Ie(l),Pe[t].c(),Pe[t].m(D,null))}for(;t<Pe.length;t+=1)Pe[t].d(1);Pe.length=ze.length}3&n&&k(D,e[0].tinyFormat),3&n&&(J.checked=J.__value===e[0].placeholderMode),3&n&&(ee.checked=ee.__value===e[0].placeholderMode),3&n&&(oe.checked=oe.__value===e[0].placeholderMode),3&n&&(ae.checked=ae.__value===e[0].placeholderMode),3&n&&ge.value!==e[0].placeholderCSS&&S(ge,e[0].placeholderCSS),e[2]?Qe?4&n&&W(Qe,1):(Qe=Oe(),Qe.c(),W(Qe,1),Qe.m(t,null)):Qe&&(U(),Y(Qe,1,1,(()=>{Qe=null})),V())},i(e){ye||(W(Qe),ye=!0)},o(e){Y(Qe),ye=!1},d(n){n&&g(t),v(we,n),v(Se,n),v(ke,n),v(Pe,n),e[9][0].splice(e[9][0].indexOf(J),1),e[9][0].splice(e[9][0].indexOf(ee),1),e[9][0].splice(e[9][0].indexOf(oe),1),e[9][0].splice(e[9][0].indexOf(ae),1),Qe&&Qe.d(),_e=!1,o($e)}}}function Qe(e,t,n){let l,o,s;r(e,he,(e=>n(0,l=e))),r(e,ue,(e=>n(1,o=e))),r(e,ce,(e=>n(2,s=e)));return[l,o,s,function(){l.useEncodedData=this.checked,he.set(l)},function(){l.normalSize=z(this),he.set(l)},function(){l.tinyQuality=z(this),he.set(l)},function(){l.tinySize=z(this),he.set(l)},function(){l.tinyFormat=z(this),he.set(l)},function(){l.placeholderMode=this.__value,he.set(l)},[[]],function(){l.placeholderMode=this.__value,he.set(l)},function(){l.placeholderMode=this.__value,he.set(l)},function(){l.placeholderMode=this.__value,he.set(l)},function(){l.placeholderCSS=this.value,he.set(l)}]}class De extends ie{constructor(e){super(),se(this,e,Qe,Pe,i,{})}}function Ae(e){let t,n,l,o;t=new De({});let s=e[1]&&Be();return{c(){te(t.$$.fragment),n=$(),s&&s.c(),l=_("")},m(e,i){ne(t,e,i),m(e,n,i),s&&s.m(e,i),m(e,l,i),o=!0},p(e,t){e[1]?s?2&t&&W(s,1):(s=Be(),s.c(),W(s,1),s.m(l.parentNode,l)):s&&(U(),Y(s,1,1,(()=>{s=null})),V())},i(e){o||(W(t.$$.fragment,e),W(s),o=!0)},o(e){Y(t.$$.fragment,e),Y(s),o=!1},d(e){le(t,e),e&&g(n),s&&s.d(e),e&&g(l)}}}function Be(e){let t,n;return t=new xe({}),{c(){te(t.$$.fragment)},m(e,l){ne(t,e,l),n=!0},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){le(t,e)}}}function He(e){let t,n,l,o,s,i,r,a,u=e[0]&&Ae(e);return{c(){t=y("a"),t.innerHTML='<svg width="120" height="120" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm svelte-1u9p1j1"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>',n=$(),l=y("h1"),l.textContent="Blur Load Tester",o=$(),s=y("section"),s.innerHTML='<p>I was intrigued by the way <a href="https://jmperezperez.com/medium-image-progressive-loading-placeholder/">Medium</a> and <a href="https://engineering.fb.com/2015/08/06/android/the-technology-behind-preview-photos/">Facebook</a> use blurred preview images while the larger versions are loading. It&#39;s pretty clever — with a\n        small enough preview image, it becomes reasonable to send it as a data element in the HTML itself instead of\n        triggering another load. And with enough blurring, the artifacts from the super small image file aren&#39;t visible.</p> \n    <p>So I ended up curious about optimal image compression for such a thing. I figured it would be different at\n        different display sizes of the actual image, but wanted to see for myself. JPEG is not the ideal choice for\n        images this small — it has a fixed overhead that usually is negligible but becomes a real factor when you&#39;re\n        looking at just a few hundred bytes. WebP is actually great, getting down to just a hundred bytes or so with\n        decent visual quality, but it&#39;s only supported in Safari on macOS &gt;= Big Sur. 😕 Other formats might be\n        promising, but nothing has as broad support as JPEG. So here we are.</p> \n    <p>Facebook went through the effort of identifying the common sections of the compressed JPEG header so they\n        could save an additional 20 bytes or so… I&#39;m not quite that interested in hyper-optimization, but of course\n        there&#39;s almost always a little more space to trim.</p> \n    <p>This page doesn&#39;t do any checking about what image types your browser supports, so if you choose one of the\n        exotic ones and all the blurred images disappear, that&#39;s why.</p> \n    <p>These photos were all taken by me at various points around the world. Consider them Creative Commons\n        licensed (<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>), I guess.</p>',i=$(),r=y("main"),u&&u.c(),w(t,"href","https://github.com/sjml/blur-load-test"),w(t,"class","github-corner svelte-1u9p1j1"),w(t,"aria-label","View source on GitHub"),w(s,"class","explainer"),w(r,"class","svelte-1u9p1j1")},m(e,c){m(e,t,c),m(e,n,c),m(e,l,c),m(e,o,c),m(e,s,c),m(e,i,c),m(e,r,c),u&&u.m(r,null),a=!0},p(e,[t]){e[0]?u?(u.p(e,t),1&t&&W(u,1)):(u=Ae(e),u.c(),W(u,1),u.m(r,null)):u&&(U(),Y(u,1,1,(()=>{u=null})),V())},i(e){a||(W(u),a=!0)},o(e){Y(u),a=!1},d(e){e&&g(t),e&&g(n),e&&g(l),e&&g(o),e&&g(s),e&&g(i),e&&g(r),u&&u.d()}}}function Ne(e,t,n){let l,o,s,i,u;r(e,he,(e=>n(2,l=e))),r(e,fe,(e=>n(3,o=e))),r(e,ue,(e=>n(0,s=e))),r(e,de,(e=>n(1,i=e))),r(e,ce,(e=>n(4,u=e)));var c=this&&this.__awaiter||function(e,t,n,l){return new(n||(n=Promise))((function(o,s){function i(e){try{a(l.next(e))}catch(e){s(e)}}function r(e){try{a(l.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,r)}a((l=l.apply(e,t||[])).next())}))};return function(){return c(this,void 0,void 0,(function*(){const e=yield fetch("./img/imageData.json");if(!e.ok)return null;return yield e.json()}))}().then((e=>a(ue,s=e,s))).then((()=>{(function(){return c(this,void 0,void 0,(function*(){const e=yield fetch(`/img/tiny/format_${l.tinyFormat}/quality_${l.tinyQuality}/size_${l.tinySize}/imageData.json`);return e.ok?(a(fe,o=parseInt(e.headers.get("Content-Length")),o),yield e.json()):null}))})().then((e=>a(de,i=e,i)))})),function(){return c(this,void 0,void 0,(function*(){const e=yield fetch("./img/sizeReport.json");if(!e.ok)return null;return yield e.json()}))}().then((e=>a(ce,u=e,u))),[s,i]}return new class extends ie{constructor(e){super(),se(this,e,Ne,He,i,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
